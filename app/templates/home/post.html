{% extends 'layout.html' %}
{% import 'macros.html' as macros with context %}
{% block content %}
    {% if post is defined %}
        <div class="border m-2 p-2">
        <h2>{{ post.title }}</h2>
        {# Controls will be implemented here if the person viewing the post is the author
                This is to allow them to update or edit the post as necessary. #}
        <p>
            {{ post.content }}
        </p>
        <p>
            By {{ post.author }} - {{ post.created_on }}
        </p>
    {% endif %}
{% if current_user is defined and current_user.is_authenticated %}
    <div>
        <span class="h5 p-3 mb-1">Create Comment</span>
        <form action="{{ url_for('home.view_post', route=post.route) }}" class="form" method="post">
            <div class="col-md-2">
                {% for field in form %}
                    {% if field.type == 'SubmitField' %}
                        <div class="form-group">
                            {{ field(class='form-control btn btn-outline-info') }}
                        </div>
                    {% elif field.type != 'CSRFTokenField' %}
                        <div class="form-group">
                            {{ field(class='form-control mt-2') }}
                        </div>
                    {% else %}
                        {{ field }}
                    {% endif %}
                {% endfor %}
            </div>
        </form>
    </div>
{% endif %}
{% if comments is defined and comments|length > 0 %}
    {% for comment in comments %}
        {{ macros.m_comment(comment.content, comment.author, comment.route, comment.date, comment) }}
    {% endfor %}
{% endif %}

</div>
{% endblock %}